!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).OURO={})}(this,(function(e){"use strict";class t{}class s{constructor(e,t={}){this.creation=e,this.episodeList=t.episodeList?t.episodeList:[],this.index=0,this.activeEpisode=null,this.nextEpisode=null,this.lastEpisode=null}start(){this.activeEpisode=new this.episodeList[this.index](this.creation),this.startActiveEpisode()}pause(){}stop(){}iterateIndex(){return this.index+=1,this.index}setActiveEpisode(){this.lastEpisode=this.activeEpisode,this.activeEpisode=this.nextEpisode,this.nextEpisode=this.episodeList[this.iterateIndex()],this.creation.renderer.add,this.unloadLastEpisode()}loadNextEpisode(){this.nextEpisode=new this.nextEpisode(this.creation)}unloadLastEpisode(){this.lastEpisode.dispose(),this.lastEpisode=null}startActiveEpisode(){this.activeEpisode.start()}endActiveEpisode(){this.activeEpisode.stop()}render(){this.activeEpisode.render()}}class i{constructor(e,t={}){this.creation=e,this.sceneList=t.sceneList?t.sceneList:[],this.index=t.index?t.index:0,this.activeScene=null,this.lastScene=null,this.nextScene=null}iterateIndex(){return this.index+=1,this.index}iterateScene(){this.lastScene=this.activeScene,this.activeScene=this.nextScene,this.setNextScene(),this.unloadLastScene()}setNextScene(){this.nextScene=this.sceneList[this.iterateIndex()]}loadNextScene(){this.nextScene&&(this.nextScene=new this.nextScene(this.creation))}unloadLastScene(){this.lastScene.dispose(),this.lastScene=null}startActiveScene(){this.activeScene.start()}endaAtiveScene(){this.activeScene.stop(),this.loadNextScene(),this.iterateScene()}start(){this.activeScene=new this.sceneList[this.index](this.creation),this.setNextScene()}render(){this.activeScene.render()}}e.Creation=class{constructor(e={}){this.canvas=e.canvasId?document.querySelector("#"+e.canvasId):document.body,this.renderer=new THREE.WebGLRenderer({canvas:this.canvas}),this.renderer.shadowMap.enabled=!e.shadowMapEnabled||e.shadowMapEnabled,this.renderer.shadowMap.enabled&&(this.renderer.shadowMap.type=THREE.BasicShadowMap),this.collmeshlist=[],this.clock=new THREE.Clock,this.tick=this.clock.getElapsedTime(),this.lastTick=this.tick,this.tickDelta=null,this.menuManager=e.menuManager?e.menuManager:new t(this),this.episodeManager=e.episodeManager?e.episodeManager:new s(this)}setMenuManager(e){this.menuManager=e}setEpisodeManager(e){this.episodeManager=e}tickUpdate(){this.tick=this.clock.getElapsedTime(),this.tickDelta=this.tick-this.lastTick,this.lastTick=this.tick}start(){this.episodeManager.start(),requestAnimationFrame((()=>this.render()))}render(){this.tickUpdate(),this.episodeManager.render(),window.requestAnimationFrame((()=>this.render()))}},e.EpisodeManager=s,e.EpisodeSkeleton=class{constructor(e,t={}){this.creation=e,this.name=t.name?t.name:"Episode",this.sceneManager=t.sceneManager?t.sceneManager:new i(this.creation)}start(){this.sceneManager.start()}stop(){this.sceneManager.stop()}render(){this.sceneManager.render()}},e.MenuManager=t,e.SceneManager=i,e.SceneSkeleton=class{constructor(e,t={}){this.creation=e,this.scene=new THREE.Scene,this.scene.fog=new THREE.FogExp2(2105376,.025),this.camera=new THREE.PerspectiveCamera(90,this.creation.canvas.clientWidth/this.creation.canvas.clientHeight,.1,1e3),this.setAspect(),window.addEventListener("resize",(()=>{this.setAspect()}),!1)}start(){}end(){}update(){}setAspect(){this.camera.aspect=this.creation.canvas.clientWidth/this.creation.canvas.clientHeight,this.camera.updateProjectionMatrix(),this.creation.renderer.setSize(this.creation.canvas.clientWidth,this.creation.canvas.clientHeight)}render(){this.update(),this.creation.renderer.render(this.scene,this.camera)}dispose(){}},Object.defineProperty(e,"__esModule",{value:!0})}));
